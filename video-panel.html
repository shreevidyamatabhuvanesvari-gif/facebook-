<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Reel Word Timing Creator</title>

<style>
body{
  background:black;
  color:white;
  text-align:center;
  font-family:Arial, sans-serif;
  margin:0;
}

h2{margin-top:15px;}

#videoContainer{
  position:relative;
  display:inline-block;
  margin-top:15px;
}

video{
  width:95vw;
  max-width:400px;
  border-radius:12px;
}

#caption{
  position:absolute;
  bottom:15%;
  width:100%;
  text-align:center;
  font-size:34px;
  font-weight:bold;
  pointer-events:none;
}

input, button{
  margin:5px;
  padding:8px;
  border-radius:6px;
  border:none;
}

button{
  cursor:pointer;
  font-weight:bold;
}

#videoContainer:fullscreen video{
  width:100%;
  height:100%;
  object-fit:contain;
}

#videoContainer:fullscreen #caption{
  font-size:60px;
}

.word{
  margin:5px;
  display:inline-block;
  transition:all 0.2s ease;
}
</style>
</head>

<body>

<h2>ðŸŽ¬ Word-by-Word Reel Caption</h2>

<input type="file" id="videoInput" accept="video/*"><br>

<input type="text" id="captionText" placeholder="à¤ªà¥‚à¤°à¤¾ à¤µà¤¾à¤•à¥à¤¯ à¤²à¤¿à¤–à¥‡à¤‚">
<input type="number" id="startTime" placeholder="Start (sec)">
<input type="number" id="wordDuration" placeholder="Per Word Time (sec)">
<button onclick="generateWordTiming()">Generate</button>
<br>
<button onclick="playVideo()">Play</button>
<button onclick="goFullScreen()">Full Screen</button>

<div id="videoContainer">
  <video id="videoPlayer" controls></video>
  <div id="caption"></div>
</div>

<script>
const videoInput = document.getElementById("videoInput");
const videoPlayer = document.getElementById("videoPlayer");
const captionDiv = document.getElementById("caption");

let wordTimings = [];

videoInput.addEventListener("change", function(){
  const file = this.files[0];
  if(file){
    videoPlayer.src = URL.createObjectURL(file);
  }
});

function generateWordTiming(){
  const text = document.getElementById("captionText").value.trim();
  const start = parseFloat(document.getElementById("startTime").value);
  const perWord = parseFloat(document.getElementById("wordDuration").value);

  if(!text || isNaN(start) || isNaN(perWord)){
    alert("à¤¸à¤¹à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤­à¤°à¥‡à¤‚");
    return;
  }

  wordTimings = [];
  const words = text.split(" ");
  let currentStart = start;

  words.forEach(word=>{
    wordTimings.push({
      text: word,
      start: currentStart,
      end: currentStart + perWord
    });
    currentStart += perWord;
  });

  alert("Word timing generated âœ…");
}

function playVideo(){
  videoPlayer.play();
}

videoPlayer.addEventListener("timeupdate", ()=>{
  const currentTime = videoPlayer.currentTime;

  let activeWord = null;

  for(let i=0;i<wordTimings.length;i++){
    if(currentTime >= wordTimings[i].start &&
       currentTime < wordTimings[i].end){
      activeWord = wordTimings[i];
      break;
    }
  }

  if(activeWord){
    displayWords(activeWord.text);
  }else{
    captionDiv.innerHTML = "";
  }
});

function displayWords(word){
  captionDiv.innerHTML = `
    <span class="word" style="
      color:${randomColor()};
      transform:scale(1.4);
    ">
      ${word}
    </span>
  `;
}

function randomColor(){
  const colors=["yellow","cyan","orange","pink","lime"];
  return colors[Math.floor(Math.random()*colors.length)];
}

function goFullScreen(){
  const container=document.getElementById("videoContainer");
  if(container.requestFullscreen){
    container.requestFullscreen();
  }
}
</script>

</body>
</html>
