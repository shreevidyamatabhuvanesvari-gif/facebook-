<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Reel Caption App</title>

<style>
body {
  background: black;
  margin: 0;
  text-align: center;
  color: white;
  font-family: Arial, sans-serif;
}

h2 {
  margin-top: 20px;
}

#videoContainer {
  position: relative;
  display: inline-block;
  margin-top: 20px;
}

video {
  width: 400px;
  max-width: 90vw;
  border-radius: 10px;
}

#caption {
  position: absolute;
  bottom: 15%;
  width: 100%;
  text-align: center;
  font-size: 35px;
  font-weight: bold;
  color: yellow;
  pointer-events: none;
}

/* Fullscreen styling */
#videoContainer:fullscreen {
  width: 100%;
  height: 100%;
}

#videoContainer:fullscreen video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

#videoContainer:fullscreen #caption {
  font-size: 60px;
}

button {
  padding: 10px 20px;
  margin: 10px;
  font-size: 16px;
  cursor: pointer;
  border-radius: 5px;
  border: none;
}
</style>
</head>

<body>

<h2>Upload Reel Video</h2>

<input type="file" id="videoInput" accept="video/*">

<br>

<button onclick="playVideo()">Play</button>
<button onclick="goFullScreen()">Full Screen</button>

<div id="videoContainer">
  <video id="videoPlayer"></video>
  <div id="caption"></div>
</div>

<script>
const videoInput = document.getElementById("videoInput");
const videoPlayer = document.getElementById("videoPlayer");
const caption = document.getElementById("caption");

videoInput.addEventListener("change", function() {
  const file = this.files[0];
  if (file) {
    const url = URL.createObjectURL(file);
    videoPlayer.src = url;
  }
});

function playVideo() {
  videoPlayer.play();
}

// Demo timed words
const words = [
  { text: "अगर", start: 1, end: 2 },
  { text: "तुम", start: 2, end: 3 },
  { text: "सीरियस", start: 3, end: 4 },
  { text: "हो", start: 4, end: 5 }
];

videoPlayer.addEventListener("timeupdate", () => {
  const currentTime = videoPlayer.currentTime;
  let currentWord = null;

  for (let i = 0; i < words.length; i++) {
    if (currentTime >= words[i].start && currentTime < words[i].end) {
      currentWord = words[i];
      break;
    }
  }

  if (currentWord) {
    caption.innerHTML = `
      <span style="color:${randomColor()}">
        ${currentWord.text}
      </span>
    `;
  } else {
    caption.innerHTML = "";
  }
});

function randomColor() {
  const colors = ["yellow", "cyan", "pink", "orange"];
  return colors[Math.floor(Math.random() * colors.length)];
}

function goFullScreen() {
  const container = document.getElementById("videoContainer");

  if (container.requestFullscreen) {
    container.requestFullscreen();
  } else if (container.webkitRequestFullscreen) {
    container.webkitRequestFullscreen();
  } else if (container.msRequestFullscreen) {
    container.msRequestFullscreen();
  }
}
</script>

</body>
</html>
