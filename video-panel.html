<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Live Speech Reel Caption</title>

<style>
body{
  background:black;
  color:white;
  text-align:center;
  font-family:Arial;
  margin:0;
}

#videoContainer{
  position:relative;
  display:inline-block;
  margin-top:15px;
}

video{
  width:95vw;
  max-width:400px;
  border-radius:12px;
}

#caption{
  position:absolute;
  bottom:15%;
  width:100%;
  text-align:center;
  font-size:34px;
  font-weight:bold;
  pointer-events:none;
}

.word{
  display:inline-block;
  margin:4px;
  animation:pop 0.3s ease;
}

@keyframes pop{
  0%{transform:scale(0.6);}
  100%{transform:scale(1);}
}

button{
  margin:8px;
  padding:8px 12px;
  border:none;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>

<h2>ðŸŽ¤ Auto Speech Caption Reel</h2>

<input type="file" id="videoInput" accept="video/*"><br>
<button onclick="startRecognition()">Start Auto Caption</button>

<div id="videoContainer">
  <video id="videoPlayer" controls></video>
  <div id="caption"></div>
</div>

<script>
const videoInput = document.getElementById("videoInput");
const videoPlayer = document.getElementById("videoPlayer");
const captionDiv = document.getElementById("caption");

videoInput.addEventListener("change", function(){
  const file = this.files[0];
  if(file){
    videoPlayer.src = URL.createObjectURL(file);
  }
});

let recognition;

function startRecognition(){

  if(!('webkitSpeechRecognition' in window)){
    alert("Chrome browser à¤®à¥‡à¤‚ à¤–à¥‹à¤²à¥‡à¤‚");
    return;
  }

  recognition = new webkitSpeechRecognition();
  recognition.lang = "hi-IN";
  recognition.continuous = true;
  recognition.interimResults = true;

  recognition.onresult = function(event){

    let transcript = "";

    for(let i = event.resultIndex; i < event.results.length; i++){
      transcript += event.results[i][0].transcript;
    }

    showWords(transcript);
  };

  recognition.start();
  videoPlayer.play();
}

function showWords(text){

  const words = text.split(" ");

  captionDiv.innerHTML = words.map(word =>
    `<span class="word" style="color:${randomColor()}">${word}</span>`
  ).join(" ");
}

function randomColor(){
  const colors=["yellow","cyan","orange","pink","lime"];
  return colors[Math.floor(Math.random()*colors.length)];
}
</script>

</body>
</html>
